<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Kiwi TCMS - Articles by Alexander Todorov</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <meta property="og:title" content="Kiwi TCMS - Articles by Alexander Todorov">
    <meta property="og:type" content="profile">
    <meta property="profile:first_name" content="Alexander">
    <meta property="profile:last_name" content="Todorov">
    <meta property="profile:username" content="atodorov">
        <!-- MailChimp Newsletter Form Styles -->
        <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
        <!-- Custom Styles -->
        <link href="http://kiwitcms.org/theme/style/style.css" rel="stylesheet">
        <link href="http://kiwitcms.org/theme/style/color-palette-light.css" rel="stylesheet">
        <link href="http://kiwitcms.org/theme/style/github.css" rel="stylesheet">
        <!-- Other Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Zilla+Slab" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- Mobile nav script -->
        <script type="text/javascript" src="http://kiwitcms.org/theme/scripts/mobile-nav.js"></script>
    </head>
    <body class="" onload="setMobileNavBehaviour()">
        <!-- Nav -->
        <nav class="col-12 primary">
            <a href="/">
                <img src="http://kiwitcms.org/theme/images/kiwi_logo_h50.png" name="logo">
            </a>
            <button class="open-menu accent-unimportant"><i class="fa fa-align-justify" aria-hidden="true"></i></button>
            <div id="mobile-mask">
                <button class="close-menu accent-unimportant"><i class="fa fa-times" aria-hidden="true"></i></button>
                <ul class="topnav">
                    <li><a href="https://demo.kiwitcms.org/login/github/">GitHub Login</a></li>
                    <li><a href="http://kiwitcms.readthedocs.io">Documentation</a></li>
                    <li><a href="http://kiwitcms.org/community/">Community</a></li>
                    <li><a href="http://mrsenko.com">Support</a></li>
                    <li><a href="http://kiwitcms.org/blog/">Blog</a></li>
                    <li><a href="http://kiwitcms.org/team/">Team</a></li>
                    <li>
                        <form action="http://google.com/search" method="get">
                            <input name="sitesearch" value="http://kiwitcms.org" type="hidden">
                            <input class="search" name="q" placeholder="Search" type="text">
                        </form>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- content -->
    <section class="col-12 secondary">
        <div class="header">
            <a href="http://kiwitcms.org/blog/atodorov/2018/10/26/kiwi-tcms-api-performance-baseline/" rel="bookmark" title="Permalink to Kiwi TCMS API performance baseline">
                <h1 class="top-header">Kiwi TCMS API performance baseline</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="http://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
                on Fri 26 October 2018
            </p>
        </div>

        <div class="article">
            <p>A friend from Red Hat sent me an email asking about Kiwi TCMS performance so I did
an experiment to establish a baseline.
For API requests I got <strong>7.5 req/sec or 130 msec/req</strong> which is
1.5x <a href="https://blog.github.com/2012-09-05-how-we-keep-github-fast/">slower than GitHub</a>!</p>
<p>I used <code>perf-script</code>
(<a href="https://gist.github.com/atodorov/f5aed028b6f254d97bcaf93453abe8d2">gits here</a>)
to measure that. The script takes the first 250 test cases from our test suite
and on every execution creates a new TestPlan (1 API request), then creates
new test cases (250 requests), adds cases to test plan (250 requests),
creates new product build (1 API request), creates new TestRun (1 API request),
adds test cases to test run (250 requests) and finally updates the statuses
(250 requests).</p>
<p>A total of 1003 API requests are sent to Kiwi TCMS every time you start this script!</p>
<p>On localhost, running the development server (<code>./manage.py runserver</code>) with an
SQLite database I got:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">time</span> python perf-script

real    2m6.450s
user    0m1.069s
sys     0m0.331s

$ <span class="nb">time</span> python perf-script

real    2m7.472s
user    0m1.057s
sys     0m0.342s

$ <span class="nb">time</span> python perf-script

real    2m9.368s
user    0m1.072s
sys     0m0.351s

$ <span class="nb">time</span> python perf-script

real    2m9.197s
user    0m1.050s
sys     0m0.353s
</pre></div>


<p>This measures at 120 msec/req or 7.85 req/sec!</p>
<p><a href="https://demo.kiwitcms.org/login/github/">demo.kiwitcms.org</a> is running on an
<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances.html#burstable-performance-instances-hardware">AWS t2.micro</a>
instance (via docker-compose) with the default <code>centos/mariadb</code> image!
No extra settings or changes. I used the same computer over a WiFi
connection and a pretty standard home-speed Internet connection. Times are:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">time</span> python perf-script

real    2m18.983s
user    0m1.175s
sys     0m0.095s

$ <span class="nb">time</span> python perf-script

real    2m25.937s
user    0m1.156s
sys     0m0.108s

$ <span class="nb">time</span> python perf-script

real    2m24.120s
user    0m1.102s
sys     0m0.098s

$ <span class="nb">time</span> python perf-script

real    2m21.521s
user    0m1.154s
sys     0m0.091s
</pre></div>


<p>This measures at 140 sec/req or 7.05 req/sec!</p>
<p>Note: since I am using Python 3.6 I had to modify the file
<code>/opt/rh/rh-python36/root/lib64/python3.6/ssl.py</code> to read:</p>
<div class="highlight"><pre><span></span><span class="c1"># Used by http.client if no context is explicitly passed.</span>
<span class="n">_create_default_https_context</span> <span class="o">=</span> <span class="n">_create_unverified_context</span> <span class="c1"># this disables HTTPS cert validation</span>
</pre></div>


<p>The issue has been reported in
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1643454">RHBZ #1643454</a></p>
<p>Happy testing!</p>
        </div>
    </section>
    <section class="col-12 secondary">
        <div class="header">
            <a href="http://kiwitcms.org/blog/atodorov/2018/10/12/kiwi-tcms-team-updates/" rel="bookmark" title="Permalink to Kiwi TCMS team updates">
                <h1 class="top-header">Kiwi TCMS team updates</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="http://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
                on Fri 12 October 2018
            </p>
        </div>

        <div class="article">
            <p>I am happy to announce that <a href="http://kiwitcms.org/team/">our team</a> is steadily growing!
As we work through our <a href="http://kiwitcms.org/blog/kiwi-tcms-team/2018/01/22/kiwi-tcms-roadmap-for-2018/">roadmap</a>,
<a href="http://kiwitcms.org/blog/atodorov/2018/07/25/mid-year-roadmap-status-report/">status update here</a>, and
on-board new team members I start to feel the need for a bit more structure
and organization behind the scenes. I also wish for consistent contributions
to the project (commit early, commit often) so I can better estimate the resources
that we have!</p>
<p>I am also actively discussing Kiwi TCMS with lots of people at various conferences
and generate many ideas for the future. The latest SEETEST in Belgrade was particularly
fruitful. Some of these ideas are pulling into different directions and I need help
to keep them under control!</p>
<p>Development-wise sometimes I lose track of what's going on and who's doing what between
working on Kiwi TCMS, preparing for conferences and venues to promote the project,
doing code review of other team members, trying not to forget to check-in on
progress (especially by interns), recruiting fresh blood and thinking about
the overall future of the project. Our user base is growing and there are days
where I feel like everything is happening at once or that something
needs to be implemented ASAP (which is usually true anyway)!</p>
<p><img class="rounded" src="/images/team/rstankova.jpg"></p>
<p>Meet Rayna Stankova in the role of our team coach!
Reny is a director for Women Who Code Sofia, senior QA engineer at VMware,
mentor with CoderDojo Bulgaria and a long-time friend of mine.
Although she is an experienced QA in her own right she will be contributing
to the people side of Kiwi TCMS and less so technically!</p>
<p>Her working areas will be planning and organization:</p>
<ul>
<li>help us (re)define the project vision and goals</li>
<li>work with us on roadmaps and action plans so we can meet
  the project goals faster</li>
<li>help us (self) organize so that we are more efficient,
  including checking progress and blockers (aka enforcer) and
  meet the aforementioned consistency point</li>
<li>serve as our professional coach, motivator and somebody who will
  take care of team health (yes I really suck at motivating others)</li>
</ul>
<p>and generally serving as another very experienced member of the team!</p>
<p>We did a quick brainstorming yesterday and started to produce results
(#smileyface)! We do have a team docs space to share information
(non-public for now, will open it gradually as we grow) and came up
with the idea to use Kiwi TCMS as a check-list for our on-boarding/internship
process!</p>
<p>I don't know how it will play out but I do expect from the
team to self-improve, be inspired, become more focused and more productive!
<strong>All of this also applies to myself, even more so!</strong></p>
<h2>Existing team members progress</h2>
<p>Last year we started with 2 existing team members (Tony and myself) and 3
new interns (Ivo, Kaloyan and Tseko) who built this website!</p>
<p>Tony is the #4 contributor to Kiwi TCMS in
terms of <a href="https://github.com/kiwitcms/Kiwi/graphs/contributors">number of commits</a>
and is on track to surpass one of the original authors (before Kiwi TCMS was forked)!
He's been working mostly on internal refactoring and resolving the thousands
of pylint errors that we had (down to around 500 I think). This summer Tony and I
visited the OSCAL conference in Tirana and hosted an info booth for the project.</p>
<p>Ivo is the #5 contributor in terms of numbers of commits. He did learn very
quickly and is working on getting rid of the remaining pylint errors. His ability
to adapt and learn is quite impressive actually. Last month he co-hosted a
git workshop at HackConf, a 1000+ people IT event in Sofia.</p>
<p>Kaloyan did most of the work on our website initially (IIRC).
Now he is studying in the Netherlands
and not active on the project. We are working to reboot his on-boarding
and I'm hoping he will find the time to contribute to Kiwi TCMS regularly.</p>
<p>From the starting team only Tseko decided to move on to other ventures after
he contributed to the website.</p>
<h2>Internship program</h2>
<p>At Kiwi TCMS we have a set of training
programs that teach all the necessary technical skills before we let anyone
actively work on the project, let alone become a team member.</p>
<p>Our new interns are Denitsa Uzunova and Desislava Koleva. Both of them are
coming from Vratsa Software Community and were mentors at the recently held
CodeWeek hackathon in their home city! I wish them fast learning and good luck!</p>
<p>Happy testing!</p>
        </div>
    </section>
    <section class="col-12 secondary">
        <div class="header">
            <a href="http://kiwitcms.org/blog/atodorov/2018/09/07/how-to-add-api-logging-for-kiwi-tcms/" rel="bookmark" title="Permalink to How to add API logging for Kiwi TCMS">
                <h1 class="top-header">How to add API logging for Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="http://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
                on Fri 07 September 2018
            </p>
        </div>

        <div class="article">
            <p>In this blog post I will show more ways to customize Kiwi TCMS by adding
logging capabilities to the API backend. Indeed this is a feature that
our team deemed not required for upstream and was removed in
<a href="https://github.com/kiwitcms/Kiwi/pull/436">PR #436</a>.</p>
<p>Start by creating the following directory structure:</p>
<div class="highlight"><pre><span></span>    api_logging/
        __init__.py
        handlers.py
        models.py
</pre></div>


<p>This is a small Django application that will log every call to the API backend.
Each file looks like this:</p>
<div class="highlight"><pre><span></span>    <span class="c1"># models.py contains DB schema for your new table</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="k">class</span> <span class="nc">ApiCallLog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
        <span class="n">executed_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                 <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
</pre></div>


<p>Then</p>
<div class="highlight"><pre><span></span>    <span class="c1"># handlers.py overrides the RPC handlers coming from django-modernrpc</span>
    <span class="kn">from</span> <span class="nn">modernrpc</span> <span class="kn">import</span> <span class="n">handlers</span>

    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
    <span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>

    <span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">ApiCallLog</span>

    <span class="k">def</span> <span class="nf">log_call</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Log an RPC call to the database or stdout in DEBUG mode. &quot;&quot;&quot;</span>
        <span class="n">request_user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request_user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
            <span class="c1"># create an anonymous user object for logging purposes</span>
            <span class="n">request_user</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                <span class="n">username</span><span class="o">=</span><span class="s1">&#39;Anonymous&#39;</span><span class="p">,</span>
                <span class="n">is_active</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">method_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">method_name</span> <span class="o">=</span> <span class="s1">&#39;--- method_name missing ---&#39;</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;API call:: user: {0}, method: {1}, args: {2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">request_user</span><span class="p">,</span>
                <span class="n">method_name</span><span class="p">,</span>
                <span class="n">args</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ApiCallLog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">user</span><span class="o">=</span><span class="n">request_user</span><span class="p">,</span>
                <span class="n">method</span><span class="o">=</span><span class="n">method_name</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">XMLRPCHandler</span><span class="p">(</span><span class="n">handlers</span><span class="o">.</span><span class="n">XMLRPCHandler</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">or</span> <span class="s1">&#39;utf-8&#39;</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
            <span class="n">params</span><span class="p">,</span> <span class="n">method_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="n">log_call</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_request</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">JSONRPCHandler</span><span class="p">(</span><span class="n">handlers</span><span class="o">.</span><span class="n">JSONRPCHandler</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">process_single_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
            <span class="n">method_name</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">params</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">)</span>

            <span class="n">log_call</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_single_request</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
</pre></div>


<p><strong>NOTE:</strong>
You will have to execute <code>./manage.py makemigrations api_logging</code> to create the
initial migration for Django. This could be easier if you place the above directory
into existing Django application or craft the migration file by hand!</p>
<p>The last thing you want to do is create a <code>local_settings.py</code> file which will override
Kiwi TCMS defaults:</p>
<div class="highlight"><pre><span></span>    <span class="c1"># local_settings.py</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span> <span class="o">+=</span> <span class="p">[</span>
        <span class="s1">&#39;api_logging&#39;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">MODERNRPC_HANDLERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;api_logging.handlers.XMLRPCHandler&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;api_logging.handlers.JSONRPCHandler&#39;</span><span class="p">]</span>
</pre></div>


<p>Then place everything in <code>Dockerfile</code> like so:</p>
<div class="highlight"><pre><span></span>    FROM kiwitcms/kiwi

    COPY ./api_logging/ /venv/lib64/python3.6/site-packages/api_logging/
    COPY local_settings.py /venv/lib64/python3.6/site-packages/tcms/settings/
</pre></div>


<p>Kiwi TCMS will import your <code>local_settings.py</code> and enable the logging application.
Now build your customized Docker image and use it for deployment!</p>
<p>Happy testing!</p>
        </div>
    </section>
    <section class="col-12 secondary">
        <div class="header">
            <a href="http://kiwitcms.org/blog/atodorov/2018/08/06/how-to-override-templates-for-kiwi-tcms/" rel="bookmark" title="Permalink to How to override templates for Kiwi TCMS">
                <h1 class="top-header">How to override templates for Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="http://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
                on Mon 06 August 2018
            </p>
        </div>

        <div class="article">
            <p>This is the first publication in our customization series. It will show you
how to override any template used by Kiwi TCMS. As an example we will override
the email template that is used when registering new account. By default the
email text looks like this:</p>
<div class="highlight"><pre><span></span><span class="x">    Welcome </span><span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="x">,</span>
<span class="x">    thank you for signing up for an </span><span class="cp">{{</span> <span class="nv">site_domain</span> <span class="cp">}}</span><span class="x"> account!</span>

<span class="x">    To activate your account, click this link:</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">confirm_url</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>


<p><a href="https://demo.kiwitcms.org/login/github/">https://demo.kiwitcms.org</a>
runs a custom Docker image based on
<code>kiwitcms/kiwi</code>. For this image the confirmation email looks like this</p>
<div class="highlight"><pre><span></span><span class="x">    Welcome </span><span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="x">,</span>
<span class="x">    thank you for signing up for our Kiwi TCMS demo!</span>

<span class="x">    To activate your account, click this link:</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">confirm_url</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">    GDPR no longer allows us to automatically subscribe you to</span>
<span class="x">    our newsletter. If you wish to keep in touch and receive emails</span>
<span class="x">    with news and updates around Kiwi TCMS please subscribe at:</span>
<span class="x">    https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581</span>

<span class="x">    --</span>
<span class="x">    Happy testing!</span>
<span class="x">    The Kiwi TCMS team</span>
<span class="x">    http://kiwitcms.org</span>
</pre></div>


<p>The file that we want to override is <code>tcms/templates/email/confirm_registration.txt</code>.</p>
<p>Create a local directory (git repository) which will hold customization configuration
and create a file named <code>templates.d/email/confirm_registration.txt</code> with your text!</p>
<p>Next you want to make this file available inside your docker image so your <code>Dockerfile</code>
should look like this:</p>
<div class="highlight"><pre><span></span>    FROM kiwitcms/kiwi

    COPY ./templates.d/ /venv/lib64/python3.6/site-packages/tcms/overridden_templates/
    COPY local_settings.py /venv/lib64/python3.6/site-packages/tcms/settings/
</pre></div>


<p>where <code>local_settings.py</code> contains</p>
<div class="highlight"><pre><span></span>    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="n">settings</span><span class="o">.</span><span class="n">TEMPLATES</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;DIRS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">TCMS_ROOT_PATH</span><span class="p">,</span> <span class="s1">&#39;overridden_templates&#39;</span><span class="p">))</span>
</pre></div>


<p>The following code states <em>instruct Django to look into <code>overridden_templates</code> first and
use any templates it finds there; also make my files available in that specific location
inside the docker image</em>.</p>
<p>This approach can be used for all templates that you wish to override. Take into
account that file names must match (Django searches templates by directory path).
Now build your customized Docker image and use that for deployment!</p>
<p>Happy testing!</p>
        </div>
    </section>
    <section class="col-12 secondary">
        <div class="header">
            <a href="http://kiwitcms.org/blog/atodorov/2018/07/30/how-to-backup-docker-volumes-for-kiwi-tcms/" rel="bookmark" title="Permalink to How to backup Docker volumes for Kiwi TCMS">
                <h1 class="top-header">How to backup Docker volumes for Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="http://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
                on Mon 30 July 2018
            </p>
        </div>

        <div class="article">
            <p>When you start Kiwi TCMS by running <code>docker-compose up</code>
(see <a href="http://kiwitcms.readthedocs.io/en/latest/installing_docker.html#start-docker-compose">here</a>)
it will automatically create 2 volumes: <code>kiwi_db_data</code> and <code>kiwi_uploads</code>.
This blog post will outline how to backup these docker volumes.</p>
<h2>Backing up the database</h2>
<p>Kiwi TCMS is a Django application and the <code>manage.py</code> command provides an easy way
to dump and load the database contents. To export all contents on your docker host
execute:</p>
<div class="highlight"><pre><span></span>docker exec -it kiwi_web /Kiwi/manage.py dumpdata --all --indent 2 &gt; database.json
</pre></div>


<p>This will create a file named <code>database.json</code> in the current directory, outside of the
running container!</p>
<p>You can restore the database contents by using the following commands:</p>
<div class="highlight"><pre><span></span># delete data from all tables
docker exec -it kiwi_web /bin/bash -c &#39;/Kiwi/manage.py sqlflush | /Kiwi/manage.py dbshell&#39;
# then reload the existing data
cat database.json | docker exec -i kiwi_web /Kiwi/manage.py loaddata --format json -
</pre></div>


<p><strong>NOTE:</strong> depending on your scenario you may want to remove the existing volume
(<code>docker-compose down &amp;&amp; docker volume rm kiwi_db_data</code>) and re-create the
DB schema (<code>/Kiwi/manage.py migrate</code>) before restoring the contents!</p>
<p><strong>WARNING</strong>: the above steps are applicable to Kiwi TCMS 5.1 or above. On earlier
versions <code>manage.py</code> will fail due to various issues.</p>
<h2>Backing up file uploads</h2>
<p>Uploaded files can easily be backed up with:</p>
<div class="highlight"><pre><span></span>docker exec -it kiwi_web /bin/tar -cP /var/kiwi/uploads &gt; uploads.tar
</pre></div>


<p>and then restored:</p>
<div class="highlight"><pre><span></span>cat uploads.tar | docker exec -i kiwi_web /bin/tar -x
</pre></div>


<p>You may also try the <code>rsync</code> command but be aware that it is not installed
by default!</p>
<p>The same approach may be used to backup <code>/var/lib/mysql/</code> from the <code>kiwi_db</code>
container.</p>
<h2>Alternatives</h2>
<p>By default both docker volumes created for Kiwi TCMS use the <code>local</code> driver
and are available under <code>/var/lib/docker/volumes/&lt;volume_name&gt;</code> on the host
running your containers. You can try backing them up from there as well.</p>
<p>Another alternative is to use the
<a href="https://www.projectatomic.io/blog/2016/05/docker-lvm-plugin/">docker-lvm-plugin</a>
and create these volumes as LVM2 block devices. Then use
<code>lvcreate -s</code> command to create a snapshot volume. For more information see
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/logical_volume_manager_administration/index#snapshot_volumes">chapter 2.3.5. Snapshot Volumes</a>
from the LVM Administrator Guide for Red Hat Enterprise Linux 7.</p>
<p>Happy testing!</p>
        </div>
    </section>
    <section class="col-12 secondary">
        <div class="header">
            <a href="http://kiwitcms.org/blog/atodorov/2018/07/25/mid-year-roadmap-status-report/" rel="bookmark" title="Permalink to Mid-year roadmap status report">
                <h1 class="top-header">Mid-year roadmap status report</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="http://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
                on Wed 25 July 2018
            </p>
        </div>

        <div class="article">
            <p>Hello everyone, in this article I will outline the progress that the Kiwi TCMS
team has made towards achieving the goals on our
<a href="http://kiwitcms.org/blog/kiwi-tcms-team/2018/01/22/kiwi-tcms-roadmap-for-2018/">roadmap</a>.</p>
<h2>Make code easier to maintain</h2>
<p><em>Status: moderate progress</em></p>
<p>Initially <a href="https://codeclimate.com/github/kiwitcms/Kiwi">CodeClimate</a> reported
a "D" rating with a 1 year estimated effort. Now it is still on "D" rating with
a 7 months estimated effort to bring the project back in shape.
Code smells have dropped from 600+ to 418, duplications have been reduced from 600+ to 359!
At the same time technical debt ratio has been decreased from 32,5% to 21,6% and
little over 10000 lines of code have been removed from the source code.
Checkout
<a href="https://codeclimate.com/github/kiwitcms/Kiwi/trends/technical_debt">the stats</a>
for more info!</p>
<h2>Use pylint and pylint-django</h2>
<p><em>Status: good progress</em></p>
<p>Both pylint and pylint-django have been integrated into our CI workflow. There are even
a few custom built plugins that we use. The number of issues reported is down to around 900
from 4000+ initially. The cleanup has been lead by <a href="https://github.com/asankov">Anton Sankov</a>
with help from <a href="https://github.com/ivo0126">Ivaylo Ivanov</a> and myself.</p>
<h2>Render HTML, return JSON</h2>
<p><em>Status: no progress</em></p>
<p>Several views were probably modified to return pure JSON in the meantime but we've not
done any targeted work to resolve this issue.</p>
<h2>Submit forms, post JSON, GET clean URLs</h2>
<p><em>Status: no progress</em></p>
<p>Same as above, not much has been done in this area.</p>
<h2>API layer</h2>
<p><em>Status: complete</em></p>
<p>After Kiwi TCMS v4.0 the server side API has been reorganized and updated
to follow the model/method names used internally.</p>
<p>After the recent version 5.0 the client side API library has been stripped
to its most basic form so that you can work directly with the responses from
the server.</p>
<p>There is no more duplication and ambiguity in names because there isn't
a lot of code left!</p>
<h2>Documentation</h2>
<p><em>Status: moderate progress, dropped</em></p>
<p>All RPC methods have been documented! The rest of the internals will be documented
as we go along.</p>
<h2>No vendored JavaScript libraries</h2>
<p><em>Status: moderate progress</em></p>
<p>Several JavaScript libraries have been removed but we still carry around jQuery
and Handlebars.js. No work has been done to convert Kiwi TCMS to use the jQuery
version provided with Django.</p>
<h2>Less HTML templates with better organization</h2>
<p><em>Status: minimal progress</em></p>
<p>There are still over 100 HTML templates in Kiwi TCMS. Some of the HTML templates
have been merged together, some email templates have been refactored and marked
as translatable but the majority of them have not been updated for a long time.</p>
<h2>Modern interface with Patternfly</h2>
<p><em>Status: no progress</em></p>
<h2>JavaScript updates and front-end testing</h2>
<p><em>Status: small progress</em></p>
<p>A number of JavaScript functions have been refactored and removed during the
past few releases but there are still thousands of lines of code left to deal with.</p>
<h2>Community efforts</h2>
<p><em>Status: moderate progress</em></p>
<p>We are seeing a steady stream of new users registered on
<a href="https://demo.kiwitcms.org/login/github/">https://demo.kiwitcms.org</a> and
there are several active contributors (issues, translations).</p>
<p>Kiwi TCMS was represented at OSCAL Tirana, DjangoCon Heidelberg and PyCon Prague!
We're planning to attend HackConf and OpenFest in Sofia by the end of the year.</p>
<p>Happy testing!</p>
        </div>
    </section>

<section id="pagination" class="col-12 secondary">
    <ul class="pagination">
        <li>
            Page 1 / 1
        </li>
    </ul>
</section>
        <!-- Newsletter Form Section -->
        <section class="newsletter secondary col-12">
            <div id="mc_embed_signup">
                <a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581">Subscribe to our newsletter</a>
            </div>
        </section>
        <!-- Footer -->
        <footer class="col-12 footer primary">
            <div id="mrsenko_logo" class="col-1">
                <a href="http://MrSenko.com">
                    <i class="fa fa-user-secret fa-3x footer-logo"></i>
                </a>
            </div>
            <div class="col-9 footer-copyright">
                <p>Kiwi TCMS is a project sponsored by <a href="http://mrsenko.com/">Mr. Senko.</a></p>
                <p>Except where otherwise noted, content on this site is licensed under a
                    <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license.</a>
                </p>
                <p><a href="/legal/">Legal information</a></p>
            </div>
            <div class="col-2">
                <ul class="footer-sociallinks">
                    <li><a href="https://twitter.com/KiwiTCMS"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="https://github.com/kiwitcms/Kiwi"><i class="fa fa-github"></i></a></li>
                </ul>
            </div>
        </footer>

            <!-- Google analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113881636-1"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){
                    dataLayer.push(arguments);
                }
                gtag('js', new Date());
                gtag('config', 'UA-113881636-1');
            </script>
    </body>
</html>